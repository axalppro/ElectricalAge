name: Build on Push

on:
  push:
    branches:
      - docker_test

jobs:
  build:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout Repository
        uses: actions/checkout@v2

      - name: Log in to Docker Registry
        run: echo ${{ secrets.DOCKER_PASSWORD }} | docker login ghcr.io -u ${{ secrets.DOCKER_USERNAME }} --password-stdin

      - name: Pull Docker Image
        run: docker pull ghcr.io/axalppro/build_repo:latest

      - name: Run Docker Container
        run: |
          docker run \
            --rm \
            -v "$(pwd)":/app \
            ghcr.io/axalppro/build_repo:latest

      - name: Search For Jar File
        run: |
          ls build/libs \
            ls
            
			- name: Upload JAR artifact
      	uses: actions/upload-artifact@v2
      	with:
					name: ELN_mod
					path: build/libs/*.jar
